/**********************************************************************************************************************
File: midi_player.c
Description: Prototype for playing MIDI music on the board.
Author: Ivan Chow
Date: March 7, 2018
------------------------------------------------------------------------------------------------------------------------
API:
**********************************************************************************************************************/

#include "configuration.h"

/**********************************************************************************************************************
Constants / Definitions
**********************************************************************************************************************/

/***********************************************************************************************************************
Existing variables (defined in other files -- should all contain the "extern" keyword)
***********************************************************************************************************************/
extern volatile u32 G_u32SystemTime1ms;         /* From board-specific source file */
extern volatile u32 G_u32SystemTime1s;          /* From board-specific source file */

/**********************************************************************************************************************
Type Definitions
**********************************************************************************************************************/


/***********************************************************************************************************************
Global variable definitions with scope limited to this local application.
***********************************************************************************************************************/
static fnCode_type MidiPlayer_StateMachine;    /* The state machine function pointer */

/***********************************************************************************************************************
Local functions
***********************************************************************************************************************/

/***********************************************************************************************************************
State Machine Declarations
***********************************************************************************************************************/
static void MidiPlayerSM_Play(void);

/**********************************************************************************************************************
Function Definitions
**********************************************************************************************************************/

/*--------------------------------------------------------------------------------------------------------------------*/
/* Public functions                                                                                                   */
/*--------------------------------------------------------------------------------------------------------------------*/

/*--------------------------------------------------------------------------------------------------------------------
Function: MidiPlayerInitialize

Description:
  Initializes the State Machine and its variables.
*/
void MidiPlayerInitialize(void)
{
  MidiPlayer_StateMachine = MidiPlayerSM_Play;
}

/*----------------------------------------------------------------------------------------------------------------------
Function: MidiPlayerRunActiveState

Description:
  Selects and runs one iteration of the current state in the state machine.
  All state machines have a TOTAL of 1ms to execute, so on average n state machines
  may take 1ms / n to execute.
*/
void MidiPlayerRunActiveState(void)
{
  MidiPlayer_StateMachine();
}

/*--------------------------------------------------------------------------------------------------------------------*/
/* Private functions                                                                                                  */
/*--------------------------------------------------------------------------------------------------------------------*/

/**********************************************************************************************************************
State Machine Function Definitions
**********************************************************************************************************************/

/*-------------------------------------------------------------------------------------------------------------------*/
/* Plays the current song. */
static void MidiPlayerSM_Play(void)
{
}